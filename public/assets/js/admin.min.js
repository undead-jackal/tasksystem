$(document).ready(function(){clientTable();$(".summernote").summernote({tabsize:2,height:300,toolbar:[["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["view",["fullscreen"]]]});$("#addItem form").submitform({url:"/createItem",callback:function(a){if(a.insert){$("#addItem").modal("hide");$("#addItem form")[0].reset();$("#addItem input[name='code']").val(a.uniqid);$("#addItem textarea[name='desc']").summernote("code","");showNotification("top","right","Added Successfully","success");clientTable()}else{alert("error 505")}}});$(document).on("click",".edit-btn",function(){var a=$(this).data("id");$.simpletSubmit({url:"/getSpecificItem",data:{id:a},callback:function(b){console.log(b);$("#updItem input[name='id']").val(a);$("#updItem input[name='fname']").val(b.result.first_name);$("#updItem input[name='lname']").val(b.result.last_name);$("#updItem input[name='company']").val(b.result.company_name);$('#updItem select[name="type"] > option').each(function(){if($(this).val()==b.result.type){$(this).attr("selected","selected")}});$("#updItem input[name='contact']").val(b.result.contact);$("#updItem input[name='email']").val(b.result.email)}})});$("#updItem form").submitform({url:"/update",callback:function(a){$("#updItem").modal("hide");$("#updItem form")[0].reset();var b="Updated Item Successfully";showNotification("top","right",b,"success");clientTable()}});$(document).on("click",".rmv-btn",function(){var a=$(this).data("id");swal({title:"Are you sure you want to Remove this item?",text:"You will not be able to recover this!",type:"warning",showCancelButton:true,confirmButtonText:"Yes, Remove it!",cancelButtonText:"No, cancel please!",closeOnConfirm:false,closeOnCancel:false},function(b){if(b){$.simpletSubmit({url:"/remove",data:{id:a},callback:function(c){swal("Deleted!","Item Removed.","success");clientTable()}})}else{swal("Cancelled","Nothin was Removed","error")}})})});function clientTable(){$("#clientsTable").table({url:"/viewItem",data:{per_page:5,},render:[function(a){return a.a_id},function(a){return a.first_name+" "+a.last_name},function(a){return a.company_name},function(b){var a=(b.type!=0)?"Client":"Internal";return a},function(a){return a.email},function(a){return a.contact},function(a){return a.date_added},function(a){return a.fname+" "+a.lname},function(a){return'<button data-id="'+a.a_id+'" data-table="edititem" data-toggle="modal" data-target="#updItem" class="btn edit-btn btn-sm mr-2"><i class="fa fa-edit"></i></button><button data-id="'+a.a_id+'"  class="btn rmv-btn btn-sm"><i class="fa fa-trash"></i></button>'},]})};