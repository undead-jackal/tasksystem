$(document).ready(function(){projectTable();$('#addProject input[name="deadline"]').datetimepicker({format:"YYYY/MM/DD",});$("#addProject form").submitform({url:"/projectCreate",callback:function(a){if(a){$("#addProject").modal("hide");$("#addProject form")[0].reset();showNotification("top","right","Added Successfully","success");projectTable()}else{alert("error 505")}}});$(document).on("click",".edit-btn",function(){var a=$(this).data("id");$.simpletSubmit({url:"/getSpecificProject",data:{id:a},callback:function(b){console.log(b);$("#editProject input[name='id']").val(a);$("#editProject input[name='project']").val(b.result.name);$("#editProject input[name='type']").val(b.result.type);$("#editProject input[name='deadline']").val(b.result.deadline);$('#editProject select[name="account"] > option').each(function(){if($(this).val()==b.result.account_owner){$(this).attr("selected","selected")}})}})});$("#editProject form").submitform({url:"/updateProject",callback:function(a){$("#editProject").modal("hide");$("#editProject form")[0].reset();var b="Updated Project Successfully";showNotification("top","right",b,"success");projectTable()}});$(document).on("click",".rmv-btn",function(){var a=$(this).data("id");swal({title:"Are you sure you want to Remove this item?",text:"You will not be able to recover this!",type:"warning",showCancelButton:true,confirmButtonText:"Yes, Remove it!",cancelButtonText:"No, cancel please!",closeOnConfirm:false,closeOnCancel:false},function(b){if(b){$.simpletSubmit({url:"/removeProject",data:{id:a},callback:function(c){swal("Deleted!","Project Removed.","success");projectTable()}})}else{swal("Cancelled","Nothin was Removed","error")}})})});function projectTable(){$("#projectTable").table({url:"/projectView",data:{per_page:5,},render:[function(a){return a.p_id},function(a){return a.name},function(a){return a.p_type},function(b){var a=(b.p_status!=0)?"Completed":"Pending";return a},function(a){return a.fname+" "+a.lname},function(a){return a.date_added},function(a){return a.deadline},function(a){return a.first_name+" "+a.last_name},function(a){return'<button data-id="'+a.p_id+'"  data-toggle="modal" data-target="#editProject" class="btn edit-btn btn-sm mr-2"><i class="fa fa-edit"></i></button><button data-id="'+a.p_id+'"  class="btn rmv-btn btn-sm"><i class="fa fa-trash"></i></button>'},]})};