$(document).ready(function(){$('#addTask input[name="deadline"]').datetimepicker({format:"YYYY/MM/DD",});taskTable();$(".summernote").summernote({tabsize:2,height:300,toolbar:[["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["view",["fullscreen"]]]});$("#addTask form").submitform({url:"/createTask",callback:function(a){if(a.insert){$("#addTask").modal("hide");$("#addTask form")[0].reset();$("#addTask textarea[name='instruction']").summernote("code","");showNotification("top","right","Added Successfully","success");taskTable()}else{alert("error 505")}}});$(document).on("click",".edit-btn",function(){var a=$(this).data("id");$.simpletSubmit({url:"/getTask",data:{id:a},callback:function(b){console.log(b);$("#editTask input[name='id']").val(a);$("#editTask input[name='task']").val(b.result.name);$("#editTask input[name='deadline']").val(b.result.deadline);$("#editTask textarea[name='instruction']").summernote("code",b.result.instruction);$('#editTask select[name="assign"] > option').each(function(){if($(this).val()==b.result.assign_to){$(this).attr("selected","selected")}});$('#editTask select[name="project"] > option').each(function(){if($(this).val()==b.result.project_id){$(this).attr("selected","selected")}})}})});$(document).on("click",".rmv-btn",function(){var a=$(this).data("id");swal({title:"Are you sure you want to Remove this Task?",text:"You will not be able to recover this!",type:"warning",showCancelButton:true,confirmButtonText:"Yes, Remove it!",cancelButtonText:"No, cancel please!",closeOnConfirm:false,closeOnCancel:false},function(b){if(b){$.simpletSubmit({url:"/removeTask",data:{id:a},callback:function(c){swal("Deleted!","Task Removed.","success");taskTable()}})}else{swal("Cancelled","Nothin was Removed","error")}})});$(document).on("click",".view-btn",function(){var a=$(this).data("id");$.simpletSubmit({url:"/getTask",data:{id:a},callback:function(c){console.log(c.result.name);$("#viewTask input[name='id']").val(a);$("#viewTask .project").html(c.result.name);$("#viewTask .name").html(c.result.t_name);$("#viewTask .deadline").html(c.result.deadline);$('#viewTask select[name="status"] > option').each(function(){if($(this).val()==c.result.status){$(this).attr("selected","selected")}});$("#viewTask textarea[name='content']").summernote("code",c.result.content);$("#viewTask .assign_by").html(c.result.codename);var b="";if(c.result.status==0){b='<div class="alert alert-warning"><span>PENDING</span></div>'}else{if(c.result.status==1){b='<div class="alert alert-primary"><span>INPROGRESS</span></div>'}else{if(c.result.status==2){b='<div class="alert alert-info"><span>FOR QA</span></div>'}else{if(c.result.status==3){b='<div class="alert alert-success"><span>COMPLETED</span></div>'}else{if(c.result.status==4){b='<div class="alert alert-error"><span>UNFINISHED</span></div>'}}}}}$("#viewTask .instruction").html(c.result.instruction);$("#viewTask .modal-title").html(b)}})})});function taskTable(){$("#taskTable").table({url:"/viewTask",data:{per_page:5,},render:[function(a){return a.id},function(a){return a.t_name},function(a){return a.name},function(a){return a.codename},function(a){return a.assign_codename},function(b){var a=(b.status!=0)?"Completed":"Pending";return a},function(a){return a.deadline},function(a){return'<button data-id="'+a.id+'"  data-toggle="modal" data-target="#editTask" class="btn edit-btn btn-sm mr-2"><i class="fa fa-edit"></i></button><button data-id="'+a.id+'"  data-toggle="modal" data-target="#viewTask" class="btn view-btn btn-sm mr-2"><i class="fa fa-eye"></i></button><button data-id="'+a.id+'"  class="btn rmv-btn btn-sm"><i class="fa fa-trash"></i></button>'},]})};